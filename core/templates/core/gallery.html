{% extends 'core/base.html' %}
{% load static i18n %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/gallery.css' %}">

<h1 id="title">{% trans "Some of our work" %}</h1>

<div class="grid">
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/38.webp' %}" alt="{% trans 'Description of Image 38' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/39.webp' %}" alt="{% trans 'Description of Image 39' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/26.webp' %}" alt="{% trans 'Description of Image 26' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/27.webp' %}" alt="{% trans 'Description of Image 27' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/1.webp' %}" alt="{% trans 'Kitchen Renovation' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/2.webp' %}" alt="{% trans 'Kitchen Renovation' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/3.webp' %}" alt="{% trans 'Kitchen Renovation' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/6.webp' %}" alt="{% trans 'Description of Image 6' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/7.webp' %}" alt="{% trans 'Description of Image 7' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/8.webp' %}" alt="{% trans 'Description of Image 8' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/9.webp' %}" alt="{% trans 'Description of Image 9' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/10.webp' %}" alt="{% trans 'Description of Image 10' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/11.webp' %}" alt="{% trans 'Description of Image 11' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/12.webp' %}" alt="{% trans 'Description of Image 12' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/13.webp' %}" alt="{% trans 'Description of Image 13' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/14.webp' %}" alt="{% trans 'Description of Image 14' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/15.webp' %}" alt="{% trans 'Description of Image 15' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/16.webp' %}" alt="{% trans 'Description of Image 16' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/17.webp' %}" alt="{% trans 'Description of Image 17' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/18.webp' %}" alt="{% trans 'Description of Image 18' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/19.webp' %}" alt="{% trans 'Description of Image 19' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/20.webp' %}" alt="{% trans 'Description of Image 20' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/21.webp' %}" alt="{% trans 'Description of Image 21' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/22.webp' %}" alt="{% trans 'Description of Image 22' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/23.webp' %}" alt="{% trans 'Description of Image 23' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/24.webp' %}" alt="{% trans 'Description of Image 24' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/25.webp' %}" alt="{% trans 'Description of Image 25' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/31.webp' %}" alt="{% trans 'Hotel' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/32.webp' %}" alt="{% trans 'Hotel' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/33.webp' %}" alt="{% trans 'Hotel' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/34.webp' %}" alt="{% trans 'Hotel' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/35.webp' %}" alt="{% trans 'Hotel' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/36.webp' %}" alt="{% trans 'Hotel' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/37.webp' %}" alt="{% trans 'Description of Image 37' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/29.webp' %}" alt="{% trans 'Description of Image 29' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/large/30.webp' %}" alt="{% trans 'Description of Image 30' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/quincho0.webp' %}" alt="{% trans 'Description of Image 0' %}">
  </div>
  <div class="grid-item">
    <img loading="lazy" src="{% static 'img/quincho1.webp' %}" alt="{% trans 'Description of Image 1' %}">
  </div>
</div>

<!-- Modal for image zoom -->
<style>
/* Simple modal styles */
#imgModal {
  display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.8); justify-content: center; align-items: center;
}
#imgModal.active { display: flex; }
#imgModal img {
  max-width: 90vw; max-height: 80vh; transition: transform 0.2s;
  cursor: zoom-in;
}
#imgModal .close {
  position: absolute; top: 20px; right: 30px; color: #fff; font-size: 2rem; cursor: pointer;
  background: none; border: none;
}
</style>
<div id="imgModal">
  <button class="close" aria-label="Close">&times;</button>
  <img src="" alt="">
</div>

<script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        var grid = document.querySelector('.grid');

        imagesLoaded(grid, function() {
            new Masonry(grid, {
                itemSelector: '.grid-item',
                columnWidth: 300,
                gutter: 10,
                fitWidth: true
            });
        });

        // Modal logic
        var modal = document.getElementById('imgModal');
        var modalImg = modal.querySelector('img');
        var closeBtn = modal.querySelector('.close');
        var zoomed = false;

        document.querySelectorAll('.grid-item img').forEach(function(img) {
            img.style.cursor = 'pointer';
            img.addEventListener('click', function() {
                modal.classList.add('active');
                modalImg.src = img.src;
                modalImg.alt = img.alt;
                modalImg.style.transform = 'scale(1)';
                zoomed = false;
            });
        });

        closeBtn.addEventListener('click', function() {
            modal.classList.remove('active');
            modalImg.src = '';
        });

        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.classList.remove('active');
                modalImg.src = '';
            }
        });

        // Zoom in/out on image click
        modalImg.addEventListener('click', function(e) {
            e.stopPropagation();
            zoomed = !zoomed;
            modalImg.style.transform = zoomed ? 'scale(2)' : 'scale(1)';
            modalImg.style.cursor = zoomed ? 'zoom-out' : 'zoom-in';
        });

        // ESC key closes modal
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && modal.classList.contains('active')) {
                modal.classList.remove('active');
                modalImg.src = '';
            }
        });
    });
</script>
{% endblock content %}
